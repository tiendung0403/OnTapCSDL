# README - HÆ°á»›ng dáº«n vá» DBMS vÃ  SQL Server

## Má»¥c lá»¥c

1. [CÃ¡c Ä‘áº·c Ä‘iá»ƒm cá»§a mÃ´ hÃ¬nh DBMS](#cac-dac-diem-cua-mo-hinh-dbms)
2. [NgÃ´n ngá»¯ trong DBMS](#ngon-ngu-trong-dbms)
   - [NgÃ´n ngá»¯ Ä‘á»‹nh nghÄ©a dá»¯ liá»‡u (DDL)](#ddl)
   - [NgÃ´n ngá»¯ thao tÃ¡c dá»¯ liá»‡u (DML)](#dml)
3. [PhÃ¢n loáº¡i End-Users](#phan-loai-end-users)
4. [TrÃ¡ch nhiá»‡m cá»§a DBA](#trach-nhiem-cua-dba)
5. [Tá»• chá»©c CSDL](#to-chuc-csdl)
6. [RAID vÃ  LÆ°u trá»¯](#raid-va-luu-tru)
7. [Database trong SQL Server](#database-trong-sql-server)
8. [Quáº£n trá»‹ Ä‘á»‘i tÆ°á»£ng CSDL](#quan-tri-doi-tuong-csdl)
9. [RÃ ng buá»™c trong SQL](#rang-buoc-trong-sql)

---

## CÃ¡c Ä‘áº·c Ä‘iá»ƒm cá»§a mÃ´ hÃ¬nh DBMS

- **Trá»«u tÆ°á»£ng hÃ³a dá»¯ liá»‡u:** MÃ´ hÃ¬nh dá»¯ liá»‡u chá»‰ hiá»ƒn thá»‹ mÃ´ hÃ¬nh váº­t lÃ½ á»Ÿ má»©c Ã½ niá»‡m.
- **Há»— trá»£ nhiá»u gÃ³c nhÃ¬n:** NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ truy váº¥n vÃ  thao tÃ¡c theo nhiá»u cÃ¡ch khÃ¡c nhau.
- **Chia sáº» dá»¯ liá»‡u vÃ  xá»­ lÃ½ Ä‘á»“ng thá»i:** Há»— trá»£ nhiá»u ngÆ°á»i dÃ¹ng truy cáº­p Ä‘á»“ng thá»i mÃ  khÃ´ng xung Ä‘á»™t dá»¯ liá»‡u.

## NgÃ´n ngá»¯ trong DBMS

### NgÃ´n ngá»¯ Ä‘á»‹nh nghÄ©a dá»¯ liá»‡u (DDL)

- Cho phÃ©p xÃ¡c Ä‘á»‹nh sÆ¡ Ä‘á»“ báº±ng Ä‘áº·c táº£ dá»¯ liá»‡u (`data dictionary`).

### NgÃ´n ngá»¯ thao tÃ¡c dá»¯ liá»‡u (DML)

- Há»— trá»£ thao tÃ¡c dá»¯ liá»‡u nhÆ° truy váº¥n (`SELECT`), chÃ¨n (`INSERT`), cáº­p nháº­t (`UPDATE`), xÃ³a (`DELETE`).

## PhÃ¢n loáº¡i End-Users

- **Casual Users:** NgÆ°á»i dÃ¹ng thá»‰nh thoáº£ng truy cáº­p dá»¯ liá»‡u khi cáº§n.
- **Naive Users:** NhÃ³m Ä‘Ã´ng nháº¥t, sá»­ dá»¥ng cÃ¡c chá»©c nÄƒng Ä‘áº·t sáºµn, vÃ­ dá»¥: nhÃ¢n viÃªn bÃ¡n hÃ ng.
- **Sophisticated Users:** CÃ¡c ká»¹ sÆ°, phÃ¢n tÃ­ch viÃªn dá»¯ liá»‡u.
- **Standalone Users:** NgÆ°á»i dÃ¹ng mÃ¡y tÃ­nh cÃ¡ nhÃ¢n Ä‘á»ƒ thao tÃ¡c vá»›i CSDL.

## TrÃ¡ch nhiá»‡m cá»§a DBA

1. **Báº£o máº­t:** Quáº£n lÃ½ quyá»n truy cáº­p vÃ  xÃ¡c thá»±c ngÆ°á»i dÃ¹ng.
2. **Äá»™ sáºµn sÃ ng cao:** Äáº£m báº£o há»‡ thá»‘ng luÃ´n hoáº¡t Ä‘á»™ng ngay cáº£ khi cÃ³ sá»± cá»‘.
3. **Äá»™ tin cáº­y:** Cháº©n Ä‘oÃ¡n, báº£o trÃ¬ há»‡ thá»‘ng vÃ  phÃ¡t hiá»‡n lá»—i.
4. **Kháº£ nÄƒng phá»¥c há»“i:** KhÃ´i phá»¥c dá»¯ liá»‡u nhanh chÃ³ng khi gáº·p lá»—i.

## Tá»• chá»©c CSDL

### CÃ¡c tÃ¡c vá»¥ trÃªn táº­p tin

1. **Truy xuáº¥t dá»¯ liá»‡u:** Chá»‰ Ä‘á»c dá»¯ liá»‡u mÃ  khÃ´ng thay Ä‘á»•i.
2. **Cáº­p nháº­t dá»¯ liá»‡u:** Chá»‰nh sá»­a, thÃªm hoáº·c xÃ³a dá»¯ liá»‡u.

## RAID vÃ  LÆ°u trá»¯

| Loáº¡i RAID   | MÃ´ táº£                                                                 |
| ----------- | --------------------------------------------------------------------- |
| **RAID 0**  | TÄƒng hiá»‡u suáº¥t Ä‘á»c/ghi, khÃ´ng cÃ³ dá»± phÃ²ng dá»¯ liá»‡u.                    |
| **RAID 1**  | Ghi dá»¯ liá»‡u trÃªn 2 á»• Ä‘Ä©a giá»‘ng nhau, tÄƒng Ä‘á»™ an toÃ n.                 |
| **RAID 5**  | Dá»¯ liá»‡u tráº£i rá»™ng trÃªn nhiá»u á»• Ä‘Ä©a, cÃ³ kháº£ nÄƒng phá»¥c há»“i náº¿u máº¥t 1 á»•. |
| **RAID 10** | Káº¿t há»£p RAID 1 & RAID 0, cÃ³ cáº£ hiá»‡u suáº¥t vÃ  dá»± phÃ²ng dá»¯ liá»‡u.         |

## Database trong SQL Server

- **Data file:** LÆ°u dá»¯ liá»‡u, báº£ng, index (Tá»‘i Ä‘a 32TB).
- **Log file:** LÆ°u thÃ´ng tin transaction log (Tá»‘i Ä‘a 4TB).
- **Primary data file (**``**)**: Chá»©a thÃ´ng tin khá»Ÿi Ä‘á»™ng vÃ  liÃªn káº¿t Ä‘áº¿n cÃ¡c file khÃ¡c.
- **Secondary data file (**``**)**: CÃ¡c file má»Ÿ rá»™ng dá»¯ liá»‡u.
- **Transaction log files (**``**)**: LÆ°u lá»‹ch sá»­ giao dá»‹ch cá»§a database.

## Quáº£n trá»‹ Ä‘á»‘i tÆ°á»£ng CSDL

### CÃ¡c database há»‡ thá»‘ng trong SQL Server

- **Master:** LÆ°u thÃ´ng tin há»‡ thá»‘ng, cáº¥u hÃ¬nh, tÃ i khoáº£n Ä‘Äƒng nháº­p.
- **Tempdb:** Giá»¯ báº£ng táº¡m (`temporary tables`).
- **Model:** Máº«u cho database má»›i Ä‘Æ°á»£c táº¡o.
- **Msdb:** Quáº£n lÃ½ lá»‹ch trÃ¬nh (`jobs`) vÃ  cáº£nh bÃ¡o.
## HÃ m trong SQL
### hÃ m ngÃ y thÃ¡ng (Date & Time)
| HÃ m	                                | Chá»©c nÄƒng                                | VÃ­ dá»¥                                                  |
| ------------------------------------- | ---------------------------------------- | ------------------------------------------------------ |
| **GETDATE()**	                        | Láº¥y ngÃ y giá» hiá»‡n táº¡i                    | **SELECT GETDATE();**                                  |
| **SYSDATETIME()**	                    | Láº¥y ngÃ y giá» chÃ­nh xÃ¡c hÆ¡n **GETDATE()** | **SELECT SYSDATETIME();**                              |
| **DATEADD(unit, sá»‘_lÆ°á»£ng, ngÃ y_gá»‘c)** | Cá»™ng/trá»« má»™t khoáº£ng thá»i gian vÃ o ngÃ y   | **SELECT DATEADD(DAY, 10, '2024-03-14');**             |
| **DATEDIFF(unit, ngÃ y1, ngÃ y2)**	    | TÃ­nh khoáº£ng cÃ¡ch giá»¯a 2 ngÃ y             | **SELECT DATEDIFF(YEAR, '2000-01-01', '2025-03-14');** |
| **DATENAME(unit, ngÃ y)**              | Tráº£ vá» tÃªn cá»§a Ä‘Æ¡n vá»‹ thá»i gian          | **SELECT DATENAME(WEEKDAY, GETDATE());**               |
| **YEAR(ngÃ y)**                        | Láº¥y nÄƒm cá»§a ngÃ y                         | **SELECT YEAR(GETDATE());**                            |
| **MONTH(ngÃ y)**                       | Láº¥y thÃ¡ng cá»§a ngÃ y                       | **SELECT MONTH(GETDATE());**                           |
| **DAY(ngÃ y)**                         | Láº¥y ngÃ y cá»§a thÃ¡ng                       | **SELECT DAY(GETDATE());**                             |


### hÃ m xá»­ lÃ½ chuá»—i (String Functions)
## RÃ ng buá»™c trong SQL

### CÃ¡c loáº¡i rÃ ng buá»™c phá»• biáº¿n

| RÃ ng buá»™c       | Ã nghÄ©a                                                       |
| --------------- | ------------------------------------------------------------- |
| **PRIMARY KEY** | Äá»‹nh danh duy nháº¥t cho má»—i dÃ²ng, khÃ´ng NULL, khÃ´ng trÃ¹ng láº·p. |
| **FOREIGN KEY** | LiÃªn káº¿t giá»¯a hai báº£ng.                                       |
| **UNIQUE**      | Äáº£m báº£o dá»¯ liá»‡u trong cá»™t lÃ  duy nháº¥t.                        |
| **CHECK**       | Äáº·t Ä‘iá»u kiá»‡n cho dá»¯ liá»‡u Ä‘áº§u vÃ o.                            |
| **DEFAULT**     | Cung cáº¥p giÃ¡ trá»‹ máº·c Ä‘á»‹nh khi khÃ´ng nháº­p dá»¯ liá»‡u.             |

### VÃ­ dá»¥ táº¡o báº£ng vÃ  rÃ ng buá»™c

```sql
-- Táº¡o báº£ng SinhVien vá»›i khÃ³a chÃ­nh
CREATE TABLE SinhVien(
    MaSV INT PRIMARY KEY NOT NULL,
    HoTen NVARCHAR(100),
    NgaySinh DATETIME
);

-- ThÃªm khÃ³a chÃ­nh vÃ o báº£ng Ä‘Ã£ táº¡o
ALTER TABLE SinhVien ADD CONSTRAINT PK_SinhVien PRIMARY KEY (MaSV);

-- Táº¡o khÃ³a ngoáº¡i liÃªn káº¿t vá»›i báº£ng LopHoc
CREATE TABLE LopHoc(
    MaLop CHAR(10) NOT NULL PRIMARY KEY,
    TenLop NVARCHAR(50)
);

CREATE TABLE SinhVien(
    MaSV INT PRIMARY KEY NOT NULL,
    HoTen NVARCHAR(100),
    NgaySinh DATETIME,
    MaLop CHAR(10) FOREIGN KEY REFERENCES LopHoc(MaLop)
);

-- ThÃªm khÃ³a ngoáº¡i sau khi báº£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o
ALTER TABLE SinhVien ADD CONSTRAINT FK_SinhVien_LopHoc FOREIGN KEY (MaLop) REFERENCES LopHoc(MaLop);

-- XÃ³a rÃ ng buá»™c khÃ³a ngoáº¡i
ALTER TABLE SinhVien DROP CONSTRAINT FK_SinhVien_LopHoc;

-- Táº¡o rÃ ng buá»™c UNIQUE
CREATE TABLE NhanVien(
    MaNV INT PRIMARY KEY NOT NULL,
    Email NVARCHAR(100) UNIQUE
);

-- ThÃªm rÃ ng buá»™c UNIQUE vÃ o báº£ng Ä‘Ã£ tá»“n táº¡i
ALTER TABLE NhanVien ADD CONSTRAINT UQ_NhanVien_Email UNIQUE (Email);

-- XÃ³a rÃ ng buá»™c UNIQUE
ALTER TABLE NhanVien DROP CONSTRAINT UQ_NhanVien_Email;
-- ThÃªm NOT NULL vÃ o cá»™t Ä‘Ã£ tá»“n táº¡i
ALTER TABLE NhanVien 
ALTER COLUMN MaNV INT NOT NULL;

-- ThÃªm NULL cho cá»™t ALTER TABLE MonHoc 
ALTER TABLE NhanVien
ALTER COLUMN MaNV INT NULL;

-- RÃ ng buá»™c CHECK kiá»ƒm tra Ä‘iá»u kiá»‡n 
CREATE TABLE SinhVien (
    MaSV INT PRIMARY KEY,
    HoTen NVARCHAR(100),
    Diem FLOAT CHECK (Diem >= 0 AND Diem <= 10) -- Äiá»ƒm chá»‰ tá»« 0 Ä‘áº¿n 10
);

-- RÃ ng buá»™c DEFAULT giÃ¡ trá»‹ máº·c Ä‘á»‹nh 
CREATE TABLE NhanVien (
    MaNV INT PRIMARY KEY,
    HoTen NVARCHAR(100),
    TrangThai BIT DEFAULT 1 -- Máº·c Ä‘á»‹nh lÃ  "Ä‘ang lÃ m viá»‡c" (1)
);
-- ThÃªm rÃ ng buá»™c khi Ä‘Ã£ táº¡o báº£ng 
ALTER TABLE NhanVien 
ADD CONSTRAINT DF_NhanVien_TrangThai DEFAULT 1 FOR TrangThai;

-- ThÃªm rÃ ng buá»™c CHECK khi Ä‘Ã£ táº¡o báº£ng 
ALTER TABLE SinhVien 
ADD CONSTRAINT CK_SinhVien_Diem CHECK (Diem >= 0 AND Diem <= 10);


```

## Kiá»ƒm tra thÃ´ng tin database

```sql
EXEC sp_helpdb 'Testdb';
```

---

**ðŸ“Œ Ghi chÃº:** ÄÃ¢y lÃ  báº£n cáº­p nháº­t chuáº©n hÃ³a README.md giÃºp báº¡n dá»… Ä‘á»c vÃ  tra cá»©u hÆ¡n. ðŸš€

